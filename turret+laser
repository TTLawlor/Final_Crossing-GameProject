----- TURRET ------
turret = display.newImageRect("turret.png", 60, 60)
turret.x = display.contentCenterX-200
turret.y = display.contentCenterY-70

physics.addBody( turret, "static" )
turret.myName = "turret"


local function fireTurret()


     local newLaser = display.newImageRect("laser.png", 60, 20 ) --this is laser size
     physics.addBody( newLaser, "dynamic" )
     newLaser.isBullet = applyTorque
     newLaser.myName = "laser"

     newLaser.x = turret.x
     newLaser.y = turret.y
     --newLaser:toBack()

     transition.to( newLaser, { x=2000, time=700,  -- x is lasers destination, time is how fast it goes
     onComplete = function() display.remove( newLaser ) end
     } )
end

  Runtime:addEventListener( "timer", fireTurret )
  timer.performWithDelay( 1500  , fireTurret, -1 ) --first variable is the time between shots, keep -1 for it to loop infinately

  --laser Collision
  local function laserCollision( event )
      if( event.phase == "began" ) then

        local obj1 = event.object1
        local obj2 = event.object2

          if ( obj1.myName == "character" and obj2.myName == "laser") then
                  died = true

                    --Update lives
                    livesCount = livesCount - 1
                    livesText.text = " : " .. livesCount
                    character.alpha = 0
                    timer.performWithDelay( 1000, restoreChar )

            elseif( obj1.myName == "laser" and obj2.myName == "character" ) then
                died = true

                  --Update lives
                  livesCount = livesCount - 1
                  livesText.text = " : " .. livesCount
                  character.alpha = 0
                  timer.performWithDelay( 1000, restoreChar )
             end
          end
       end
Runtime:addEventListener( "collision", laserCollision )
